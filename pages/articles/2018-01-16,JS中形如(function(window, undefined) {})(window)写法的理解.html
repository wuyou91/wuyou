<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>2018-01-16,JS中形如(function(window, undefined) {})(window)写法的理解</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
	<meta http-equiv="X-UA-Compatible" ;content="IE=edge, chrome=1">
	<link rel="stylesheet" href="../../css/layout.css" type="text/css">
	<style>
		h2{
			font-size: 32px;
		}
		p{
			font-size: 16px;
			color: #4d4d4d;
			letter-spacing:2px;
			line-height: 32px;
			margin: 10px 0 40px 0;
		}
		pre{
			white-space: pre-wrap; /*css-3*/ 
			white-space: -moz-pre-wrap; /*Mozilla,since1999*/ 
			white-space: -pre-wrap; /*Opera4-6*/ 
			white-space: -o-pre-wrap; /*Opera7*/ 
			word-wrap: break-word; /*InternetExplorer5.5+*/ 
		}
		i{
			color: #b3b3b3;
		}
		#article{
			background-color: white;
			padding: 30px 100px;
			margin: 120px 0 50px 0;
		}
		.code{
			background-color:#f2f2f2;
			padding: 10px;
			margin:10px 0;
			border: 1px solid #ccc;
		}
		.title{
			padding: 5px 0;
			border-bottom: 1px solid #ccc;
		}
		p a{
			color: #4d4d4d;
			text-decoration: underline;
		}

		@media screen and (max-width:1024px){
			#article{padding: 10px 10px;}
		}
	</style>
	<script src="../../js/jquery-3.3.1.min.js"></script>
	<script src="../../js/base.js"></script>
</head>
<body>
	<header class="clear-float">
		<div class="content">
			<div class="pp"></div>
			<ul class="nav">
				<li><a href="../../index.html">首页</a></li>
				<li><a href="../articles.html">文章</a></li>
				<li><a href="../tests.html">练习</a></li>
				<li><a href="../photos.html">摄影</a></li>
				<li><a href="../CV.html">简历</a></li>
				<li><a href="../../index.html#link">链接</a></li>
			</ul>
			<ul class="btn-mobile">
					<li></li>
					<li></li>
					<li></li>
			</ul>
			<ul class="nav-mobile">
				<li><a href="../../index.html">首页</a></li>
				<li><a href="../articles.html">文章</a></li>
				<li><a href="../tests.html">练习</a></li>
				<li><a href="../photos.html">摄影</a></li>
				<li><a href="../CV.html">简历</a></li>
				<li><a href="../../index.html#link">链接</a></li>
			</ul>
		</div>
	</header>
	<div id="content">
		<div id="article">
			<div class="title">
				<h2>JS中形如(function(window, undefined) {})(window)写法的理解</h2>
				<i>2018-01-16</i>
			</div>
			<p>在Web开发过程中,往往会看到有人这样编写JS脚本:</p>
			<div class="code">
				<pre>
(function(window, undefined) {  
    //do something  
})(window);  
				</pre>
			</div>
			<p>很多人不理解.最早是在看搜狐首页代码时看见的，隐约记得《高程3》里面有说道形如(function(){})()的立即执行函数，再百度之。得到如下解释：</p>
			<p>首先,(function(window, undefined) {})(window)可以简化看成这样()();而()()就是一个匿名函数自执行的写法.举个例子:</p>
			<div class="code"><pre>
(function() {  
    console.log("我是匿名函数,会自动执行奥!");  
})(); </pre></div>
<p>
当页面加载时,console会自动打印出:我是匿名函数,会自动执行奥! <br>
那这样写意义何在?<br>
<br>
1.首先匿名函数(function() {})()避免函数体内外变量的冲突(js执行表达式顺序为圆括号里到圆括号外);<br>
<br>
2.后面的圆括号中的window为实参,接受window对象(window对象是全局环境下的),而function后面的圆括号中的window为局部变量,不是全局的window对象.所以这样写可以提高js性能,减少作用域链查询时间.(如果在函数体内多次使用到window对象,那么把window对象当着实参穿进去,是十分必要的;如果函数内部不需要,那么就无需传递该参数.);<br>
<br>
3.function后面的形参undefined又有什么用呢?其实在一些老的浏览器中,undefined不被支持,直接使用会导致错误,所以考虑兼容性,就增加一个形参undefined;<br>
<br>
4.(function() {})()主要用于存放开发插件的代码,执行其中的代码时DOM不一定存在,所以直接自动执行DOM操作的代码,请放心使用;<br>
<br>
附录: <br>	
</p>
<div class="code">
	<pre>
//常见写法  
//1. 实参:jQuery,形参:$(避免$与其他库冲突)  
(function($) {  
    //coding  
})(jQuery);  
  
//2.;避免压缩出错  
;(function(window, docuemnt, undefined) {  
    //coding  
})(window, document);  
	</pre>
</div>
		</div>

		<div id="gotop"></div>
	</div>
	<footer>
		<div class="inf">
			<ul class="contact clear-float">
				<li><a href="https://github.com/wuyou91" alt="github" target="_blank" title="访问我的GitHub">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120.78 117.79"><defs><style>.cls-1,.cls-2{fill:#fff;}.cls-1{fill-rule:evenodd;}</style></defs><title>资源 2</title><g id="图层_2" data-name="图层 2"><g id="Layer_1" data-name="Layer 1"><path class="cls-1" d="M60.39,0A60.39,60.39,0,0,0,41.3,117.69c3,.56,4.13-1.31,4.13-2.91,0-1.44-.06-6.2-.08-11.24C28.54,107.19,25,96.42,25,96.42c-2.75-7-6.7-8.84-6.7-8.84-5.48-3.75.41-3.67.41-3.67,6.06.43,9.26,6.22,9.26,6.22,5.39,9.23,14.13,6.56,17.57,5,.54-3.9,2.11-6.57,3.83-8.08C36,85.55,21.85,80.37,21.85,57.23A23.37,23.37,0,0,1,28.08,41c-.63-1.52-2.69-7.66.58-16,0,0,5.07-1.62,16.61,6.19a57.26,57.26,0,0,1,30.24,0C87,23.42,92.11,25,92.11,25c3.29,8.32,1.22,14.46.59,16a23.32,23.32,0,0,1,6.21,16.21c0,23.19-14.13,28.3-27.57,29.8,2.17,1.87,4.1,5.55,4.1,11.18,0,8.08-.07,14.58-.07,16.57,0,1.61,1.09,3.49,4.15,2.9A60.4,60.4,0,0,0,60.39,0Z"/><path class="cls-2" d="M22.87,86.7c-.13.3-.61.39-1,.18s-.68-.61-.54-.91.6-.39,1-.19.69.61.54.91Zm-.74-.55"/><path class="cls-2" d="M25.32,89.43c-.29.27-.85.14-1.23-.28a.92.92,0,0,1-.18-1.25c.3-.27.84-.14,1.24.28s.47,1,.17,1.25Zm-.58-.62"/><path class="cls-2" d="M27.7,92.91c-.37.26-1,0-1.35-.52s-.37-1.18,0-1.44,1,0,1.35.51.37,1.19,0,1.45Zm0,0"/><path class="cls-2" d="M31,96.27c-.33.37-1,.27-1.55-.23a1.16,1.16,0,0,1-.34-1.54c.34-.37,1-.26,1.56.23s.68,1.18.33,1.54Zm0,0"/><path class="cls-2" d="M35.46,98.22c-.15.47-.83.69-1.51.49s-1.13-.76-1-1.24.82-.7,1.51-.49,1.13.76,1,1.24Zm0,0"/><path class="cls-2" d="M40.4,98.58c0,.5-.56.91-1.28.92s-1.31-.39-1.31-.88.57-.91,1.29-.92,1.31.39,1.31.88Zm0,0"/><path class="cls-2" d="M45,97.8c.09.49-.41,1-1.13,1.12s-1.35-.17-1.44-.65.42-1,1.12-1.13,1.35.17,1.44.66Zm0,0"/></g></g></svg>
				</a></li>
				<li><a href="https://weibo.com/ycx1991" alt="微博" target="_blank" title="访问我的微博">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 110.7 110.66"><defs><style>.cls-1{fill:#fff;fill-rule:evenodd;}</style></defs><title>资源 1</title><g id="图层_2" data-name="图层 2"><g id="图层_1-2" data-name="图层 1"><path class="cls-1" d="M38.64,64.83a5.33,5.33,0,0,0-4.77,5c0,2.32,2.24,3.93,5,3.6s5-2.46,5-4.77-2.07-4.16-5.26-3.86Z"/><path class="cls-1" d="M45.69,62.92a2.19,2.19,0,0,0-.63,2.83,1.73,1.73,0,0,0,2.6.24,2.31,2.31,0,0,0,.78-2.83,1.8,1.8,0,0,0-2.74-.24Z"/><path class="cls-1" d="M55.36,0A55.33,55.33,0,1,0,110.7,55.34,55.37,55.37,0,0,0,55.36,0ZM85.61,69.22c-6.1,13-26.22,19.26-41.12,18.1-14.17-1.12-32.38-5.82-34.27-23,0,0-1-7.77,6.53-17.81,0,0,10.83-15.12,23.44-19.44s14.09,3,14.09,7.27c-.67,3.64-1.92,5.79,2.81,4.31,0,0,12.41-5.75,17.51-.65,4.12,4.12.68,9.79.68,9.79s-1.71,1.89,1.81,2.58,14.61,5.84,8.51,18.82ZM73.38,33.42a2.44,2.44,0,0,1,0-4.89s15.21-2.81,13.39,13.53a1.05,1.05,0,0,1,0,.26,2.44,2.44,0,0,1-4.85-.39S84.3,31,73.38,33.42Zm25.69,11.4c-.4,5.89-1.78,3.82-3.41,3.82-2,0-3.53-1-3.53-2.94a7.87,7.87,0,0,1,.7-3.12c.21-.72,1.86-5-1.09-11.63-5.41-9.08-16.3-9.14-17.59-8.62a18.93,18.93,0,0,1-3.21.8,3.53,3.53,0,0,1-1-6.93l.09,0,.34-.05c1.51-.29,6.92-2.36,12.18-1.13C92,17.2,104.9,27.16,99.09,44.82Z"/><path class="cls-1" d="M45.59,47.39c-14.8.68-26.76,8.61-26.76,18.49s12,17.3,26.76,16.61,26.79-9.94,26.79-19.82-12-16-26.79-15.28ZM55.67,72.25c-4.53,5.85-13.5,8.71-22.2,4a7.7,7.7,0,0,1-4-6.66S27.76,55.63,42.64,53.9s17.57,12.5,13,18.35Z"/></g></g></svg>
				</a></li>
				<li><a href="mailto:ycx1991@live.com" alt="Email" title="发邮件给我">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 831.95 831.95"><defs><style>.cls-1{fill:#fff;}</style></defs><title>资源 1</title><g id="图层_2" data-name="图层 2"><g id="Slovenia"><path class="cls-1" d="M416,0C186.24,0,0,186.24,0,416s186.24,416,416,416,416-186.24,416-416S645.71,0,416,0ZM679.44,613.51H152.5a61.24,61.24,0,0,1-61.06-61v-273a61.25,61.25,0,0,1,61.06-61.06H679.44a61.25,61.25,0,0,1,61.06,61.06v273A61.24,61.24,0,0,1,679.44,613.51Z"/><path class="cls-1" d="M412.21,421.82,117.46,233.24a7,7,0,0,1-2.11-9.6h0a7,7,0,0,1,9.6-2.12h0L416,407.7,707,221.52h0a6.93,6.93,0,0,1,9.6,2.11h0a6.94,6.94,0,0,1-2.11,9.6h0L419.7,421.82a6.93,6.93,0,0,1-3.74,1.09h0a6.94,6.94,0,0,1-3.74-1.09Z"/><path class="cls-1" d="M108.25,603.63a7,7,0,0,1-1.5-9.71h0L294.22,337.59a7,7,0,0,1,9.71-1.52h0a7,7,0,0,1,1.51,9.73h0L118,602.12a7,7,0,0,1-5.62,2.85h0a6.9,6.9,0,0,1-4.09-1.34Z"/><path class="cls-1" d="M714,602.12,526.5,345.8a6.94,6.94,0,0,1,1.5-9.72h0a6.94,6.94,0,0,1,9.71,1.5h0l187.5,256.32a7,7,0,0,1-1.5,9.71h0a6.92,6.92,0,0,1-4.1,1.34h0a6.93,6.93,0,0,1-5.61-2.85Z"/></g></g></svg>
				</a></li>
			</ul>
			<div class="copyright">Copyright ©2018 by wuyou. All rights reserved. <br />Powered by GitHub Pages.</div>
		</div>
	</footer>
</body>
</html>